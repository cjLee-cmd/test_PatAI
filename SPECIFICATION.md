# Pat.AI/특허분석 AI - 제작 사양서

## 1. 프로젝트 개요

### 1.1 프로젝트명
- **이름**: Pat.AI/특허분석 AI
- **목적**: 학교의 모든 특허를 질의하는 RAG 시스템 구축
- **배포**: GitHub Pages/Actions를 통한 공유

### 1.2 핵심 기능
- 특허 문서 기반 질의응답 시스템
- PDF 문서 자동 임포팅 및 벡터 데이터베이스 저장
- 사용자별 검색 히스토리 관리
- 관리자/사용자 권한 기반 접근 제어

## 2. 시스템 아키텍처

### 2.1 기술 스택
- **Frontend**: HTML, CSS, JavaScript (모던 디자인 트렌드 적용)
- **Backend**: Python (FastAPI/Flask 권장)
- **AI 모델**: GPT-OSS-20B
- **임베딩**: 적합한 임베딩 모델 (연구 후 선정)
- **벡터 DB**: ChromaDB, Pinecone, 또는 FAISS 중 선정
- **사용자 DB**: SQLite 또는 PostgreSQL

### 2.2 시스템 구성요소
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Frontend UI   │───▶│  Backend API     │───▶│   Vector DB     │
│                 │    │                  │    │                 │
│ - 로그인        │    │ - 인증/권한      │    │ - 임베딩 저장   │
│ - 채팅 인터페이스│    │ - RAG 파이프라인│    │ - 유사도 검색   │
│ - 히스토리      │    │ - PDF 처리       │    │                 │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────▼───────────────────────┘
                        ┌──────────────────┐
                        │   User DB        │
                        │                  │
                        │ - 사용자 정보    │
                        │ - 검색 히스토리  │
                        │ - 세션 관리      │
                        └──────────────────┘
```

## 3. 기능 명세서

### 3.1 사용자 인증 시스템

#### 3.1.1 로그인 기능
- **입력 필드**: ID, Password
- **인증 방식**: 세션 기반 또는 JWT
- **초기 관리자 계정**: ID: Admin, PW: Admin

#### 3.1.2 회원가입 기능
- **필수 입력 정보**:
  - 아이디 (중복 검사)
  - 비밀번호 (최소 8자, 특수문자 포함)
  - 이름
  - 프로필 사진 (선택)
- **권한**: 기본적으로 User 권한 부여

#### 3.1.3 권한 관리
- **Admin 권한**:
  - PDF 문서 업로드/삭제
  - 사용자 관리
  - 시스템 설정
- **User 권한**:
  - 특허 검색/질의
  - 개인 히스토리 조회

### 3.2 RAG 시스템

#### 3.2.1 문서 처리 파이프라인
```python
# 처리 단계
PDF 업로드 → 텍스트 추출 → 청킹 → 임베딩 → 벡터DB 저장
```

#### 3.2.2 청킹 전략
- **청크 크기**: 500-1000 토큰
- **오버랩**: 100-200 토큰
- **청킹 방법**: 의미 단위 분할 (문장/문단 기준)

#### 3.2.3 임베딩 모델 후보
- **한국어 특화**: KoSentenceBERT
- **다국어 지원**: sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
- **성능 우선**: text-embedding-ada-002 (OpenAI)

#### 3.2.4 벡터 데이터베이스 후보
- **ChromaDB**: 오픈소스, 간편한 설정
- **Pinecone**: 클라우드 기반, 높은 성능
- **FAISS**: 페이스북 개발, 로컬 실행

#### 3.2.5 검색 및 답변 생성
- **검색**: 코사인 유사도 기반 Top-K 검색
- **답변 생성**: GPT-OSS-20B 모델 사용
- **소스 표시**: 사용된 청크 정보 제공

### 3.3 사용자 인터페이스

#### 3.3.1 메인 화면 구성
```
┌─────────────────────────────────────────────────────────────┐
│ [로고] Pat.AI/특허분석 AI        [아이디][이름][프로필사진] │
├─────────────────────────────────────────────────────────────┤
│ [사이드바]                    [채팅 영역]                   │
│                                                             │
│ 검색 히스토리:                질의: "OO 기술 특허 현황"     │
│ - 2024.01.15                  답변: "검색된 특허 정보..."   │
│   AI 기술 특허                소스: [청크1][청크2]          │
│ - 2024.01.14                                               │
│   바이오 기술                 [질문 입력창]                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 3.3.2 관리자 기능 (서브 윈도우)
- **PDF 업로드 인터페이스**
- **문서 관리 (추가/삭제/상태 확인)**
- **사용자 관리**
- **시스템 모니터링**

### 3.4 데이터베이스 설계

#### 3.4.1 사용자 테이블 (users)
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    profile_image VARCHAR(255),
    role ENUM('admin', 'user') DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 3.4.2 검색 히스토리 테이블 (search_history)
```sql
CREATE TABLE search_history (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    query TEXT NOT NULL,
    response TEXT,
    sources JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

#### 3.4.3 문서 메타데이터 테이블 (documents)
```sql
CREATE TABLE documents (
    id INTEGER PRIMARY KEY,
    filename VARCHAR(255) NOT NULL,
    file_path VARCHAR(500),
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    processed BOOLEAN DEFAULT FALSE,
    chunk_count INTEGER DEFAULT 0
);
```

## 4. 개발 일정

### Phase 1: 기본 시스템 구축 (2주)
- [ ] 사용자 인증 시스템 구현
- [ ] 기본 UI 구성
- [ ] 데이터베이스 설계 및 구축

### Phase 2: RAG 시스템 개발 (3주)
- [ ] PDF 처리 파이프라인 구현
- [ ] 임베딩 모델 통합
- [ ] 벡터 데이터베이스 연동
- [ ] 검색 및 답변 생성 시스템

### Phase 3: UI/UX 완성 (2주)
- [ ] 채팅 인터페이스 구현
- [ ] 검색 히스토리 기능
- [ ] 관리자 패널 구현
- [ ] 반응형 디자인 적용

### Phase 4: 테스트 및 배포 (1주)
- [ ] 기능 테스트
- [ ] 성능 최적화
- [ ] GitHub Pages 배포 설정
- [ ] 문서화

## 5. 기술적 고려사항

### 5.1 성능 최적화
- **캐싱**: 자주 검색되는 질의 결과 캐싱
- **인덱싱**: 벡터 인덱스 최적화
- **비동기 처리**: PDF 처리를 백그라운드에서 수행

### 5.2 보안 고려사항
- **비밀번호 해싱**: bcrypt 사용
- **세션 관리**: 안전한 세션 토큰
- **파일 업로드 검증**: 악성 파일 차단

### 5.3 확장성 고려사항
- **모듈화**: 각 기능을 독립적인 모듈로 구성
- **API 설계**: RESTful API 구조
- **설정 관리**: 환경별 설정 분리

## 6. 배포 및 운영

### 6.1 GitHub Pages 배포
- **정적 파일**: HTML, CSS, JS
- **GitHub Actions**: CI/CD 파이프라인
- **환경 변수**: API 키 등 민감 정보 관리

### 6.2 모니터링
- **로그 관리**: 에러 및 사용 패턴 로깅
- **성능 모니터링**: 응답 시간, 처리량 추적
- **사용자 피드백**: 개선사항 수집

## 7. 예상 리스크 및 대응방안

### 7.1 기술적 리스크
- **모델 성능**: GPT-OSS-20B 성능 검증 필요
- **한국어 처리**: 한국어 특허 문서 처리 최적화
- **응답 속도**: 실시간 응답을 위한 최적화

### 7.2 대응방안
- **모델 비교**: 여러 모델 성능 테스트
- **점진적 개발**: MVP 우선 구현 후 개선
- **사용자 테스트**: 베타 테스트를 통한 피드백 수집